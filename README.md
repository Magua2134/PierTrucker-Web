# 集装箱信息查询系统

## 项目简介

这是一个网页版的集装箱查询工具，由Excel VBA版本的PierTrucker集装箱查询工具改进而来。该系统可以查询集装箱的状态、航线、尺寸、位置、LFD日期和预约信息。

### 功能特点

- **用户登录**：安全的用户认证系统
- **版本检查**：自动检查系统版本
- **集装箱状态查询**：查询各大码头的集装箱信息
- **默认查询**：自动添加默认集装箱信息（LBCT TRHU7156210和LBCT 2 TRHU7156210）
- **批量输入**：一次性输入多个集装箱和码头信息
- **错误处理**：完善的错误处理和日志记录

## 系统要求

- **Node.js**: v12.0.0 或更高版本
- **浏览器**: 支持ES6的现代浏览器（Chrome、Firefox、Edge等）
- **操作系统**: Windows、MacOS或Linux

## 快速开始

### Windows用户

1. 下载项目文件
2. 双击运行 `start.bat`
3. 系统将自动安装依赖、启动服务器并打开浏览器
4. 使用默认账号登录：
   - **用户名**: nhn05k5aha@iwatermail.com
   - **密码**: 123456aa

### 其他操作系统用户

1. 确保安装了Node.js
2. 打开终端，进入项目目录
3. 执行以下命令：

```bash
# 安装依赖
npm install

# 启动代理服务器
node proxy.js
```

4. 在浏览器中访问 `http://localhost:3000`
5. 使用默认账号登录

## 使用说明

### 基本操作

1. **登录**：输入用户名和密码，点击"登录"按钮
2. **添加集装箱**：选择码头，输入集装箱号，点击"添加行"可添加更多集装箱
3. **查询**：点击"检查所有集装箱"按钮进行查询
4. **清空数据**：点击"清空数据"按钮

### 批量输入

1. 点击"批量导入"按钮
2. 按照格式输入集装箱信息（每行一个，格式：码头代码 集装箱号）
   例如：
   ```
   LBE TRHU7156210
   LBE 2 TRHU7156210
   LAAPM ABCD1234567
   ```
3. 点击"导入"按钮

### 支持的码头代码

| 代码      | 码头名称    |
|----------|-----------|
| LAAPM    | T-APM      |
| LAETS    | T-ETS      |
| LAGGS    | T-FMS      |
| ITS      | T-ITS      |
| LBC60    | SHIPPER    |
| LBPCT    | T-PCT      |
| LBA      | T-Pier A   |
| LBE      | T-LBCT     |
| LATraPac | T-TraPac   |
| LBT      | T-TTI      |
| LAWBCT   | T-WBCT     |
| LAYusen  | T-YTI      |

## 故障排除

### 常见问题解决

1. **无法连接到代理服务器**
   - 确保代理服务器已启动（检查是否有Node.js进程在运行）
   - 检查端口3000是否被占用，可以尝试修改`proxy.js`中的端口号

2. **登录失败**
   - 确认用户名和密码是否正确
   - 检查网络连接是否正常
   - 查看浏览器控制台是否有错误信息

3. **查询结果显示错误**
   - 确认集装箱号和码头是否正确
   - 检查日志文件（位于logs目录）了解详细错误信息

### 日志文件

系统会自动生成以下日志文件（位于`logs`目录）：

- `access_日期.log`：访问日志
- `proxy.log`：代理请求日志
- `proxy_error.log`：代理错误日志
- `error.log`：系统错误日志
- `server.log`：服务器启动日志
- `proxy_output.log`：代理服务器输出日志

## 项目结构

```
码头网站状态查询/
├── index.html          # 网页界面
├── script.js           # 前端JavaScript代码
├── styles.css          # CSS样式
├── proxy.js            # 代理服务器
├── start.bat           # Windows启动脚本
├── package.json        # 依赖配置
├── logs/               # 日志目录
└── README.md           # 项目说明
```

## 技术栈

- **前端**：HTML, CSS, JavaScript, Bootstrap 5
- **后端**：Node.js, Express
- **网络**：HTTP代理, REST API

## 版本历史

- **v2.0** (当前版本)
  - 添加批量输入功能
  - 增加默认集装箱信息
  - 改进错误处理和日志记录
  - 优化用户界面

- **v1.0**
  - 基本查询功能
  - 用户登录
  - 版本检查

## 开发者信息

本项目是将Excel VBA版本的PierTrucker集装箱查询工具迁移到网页版。如有问题或建议，请联系项目维护者。

---

*版权所有 © 2023 集装箱信息查询系统 - 网页版* 